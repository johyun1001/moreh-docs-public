# Moreh 솔루션 사용현황 확인하기

```
moreh-smi
```

위 명령어를 통해 현재 선택된 Software-Defined Accelerator(SDA) Model, 실행 중인 학습 프로세스 및 GPU Resource를 얼마나 할당받고있는지를 확인 할 수 있습니다.


```bash
(pytorch) ubuntu@moreh-server:~$ moreh-smi

+-------------------------------------------------------------------------------------------------+
|  Moreh-SMI 22.10.2                            Client Version: 22.10.2  Server Version: 22.10.2  |
+-------------------------------------------------------------------------------------------------+
|  Device  |        Name         |     Model    |  Memory Usage  |  Total Memory  |  Utilization  |
+=================================================================================================+
|    1198  |  KT AI Accelerator  |  Small.64GB  |  -             |  -             |  -            |
+-------------------------------------------------------------------------------------------------+

Processes:
+----------------------------------------------------------+
|  Device  |  Job ID  |  PID  |  Process  |  Memory Usage  |
+==========================================================+
+----------------------------------------------------------+
```

PyTorch 프로그램이 AI 가속기를 사용 중인 동안에는 다음과 같이 실행 중인 프로세스 정보, 전체 메모리 용량과 현재 메모리 사용량이 함께 표시됩니다.

```bash
(pytorch) ubuntu@moreh-server:~$ moreh-smi

+-------------------------------------------------------------------------------------------------+
|  Moreh-SMI 22.10.2                            Client Version: 22.10.2  Server Version: 22.10.2  |
+-------------------------------------------------------------------------------------------------+
|  Device  |        Name         |     Model    |  Memory Usage  |  Total Memory  |  Utilization  |
+=================================================================================================+
|    1198  |  KT AI Accelerator  |  Small.64GB  |  46030 MiB     |  65520 MiB     |  -            |
+-------------------------------------------------------------------------------------------------+

Processes:
+--------------------------------------------------------------------+
|  Device  |  Job ID  |   PID   |      Process      |  Memory Usage  |
+====================================================================+
|    1198  |   37696  |  15850  |  python train.py  |  46030 MiB     |
+--------------------------------------------------------------------+
```

**Supported Arguments**

**-h 또는 --help**

사용할 수 있는 Supported Arguments을 나열합니다.

```bash
(pytorch) ubuntu@moreh-server:~$ moreh-smi -h
Usage: moreh-smi [-h | --help] [-r | --reset] [-v | --version] [-t | --token]
```

**-r 또는 --reset**

현재 GPU를 사용하여 동작 중인 job을 중지하고 정리합니다.

```bash
(pytorch) ubuntu@moreh-server:~$ moreh-smi -r
Device release success.
```

**-v 또는 --version**

현재 사용 중인 moreh-smi의 version을 확인합니다.

```bash
(pytorch) ubuntu@moreh-server:~$ moreh-smi -v
Moreh AI Platform 22.10.2
```

**-t 또는 --token**

현재 vm에 할당된 token을 확인합니다. Token 고유의 인증 수단이므로 외부로 유출하지 않도록 합니다.

```bash
(pytorch) ubuntu@moreh-server:~$ moreh-smi -t
+----------------------------------------------------------------------------+
|  Moreh-SMI 22.10.2                                                         |
+----------------------------------------------------------------------------+
|  Device  |        Name         |            Token           |     Model    |
+============================================================================+
|    1198  |  KT AI Accelerator  |  ZXhhbXBsZSB0b2tlbiBzdHI=  |  Small.64GB  |
+----------------------------------------------------------------------------+
```